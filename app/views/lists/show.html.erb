<div class="container my-4">
  <div class="list-header border rounded-3 p-3 mb-4 bg-white shadow-sm">
    <h1 class="h2 mb-0"><%= @list.name %></h1>
  </div>

  <div class="accordion" id="itemsAccordion">
    <% @items.each_with_index do |item, index| %>
      <div class="accordion-item mb-3 border rounded-3 overflow-hidden">

        <h2 class="accordion-header" id="heading<%= item.id %>">
          <button class="accordion-button collapsed bg-white text-dark" type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#collapse<%= item.id %>"
                  aria-expanded="false"
                  aria-controls="collapse<%= item.id %>">
            <div class="d-flex justify-content-between w-100 align-items-center">
              <span><%= item.name %></span>
              <small class="text-muted me-3">¥<%= item.price.price_with_tax %></small>
            </div>
          </button>
        </h2>

        <div id="collapse<%= item.id %>" class="accordion-collapse collapse"
             aria-labelledby="heading<%= item.id %>"
             data-bs-parent="#itemsAccordion">
          <div class="accordion-body bg-light">
            <div class="d-flex overflow-auto py-2 gap-3">

              <% item.price.product.prices.each do |price| %>
                <div class="product-card card shadow-sm" style="min-width: 180px;">
                  <div class="bg-secondary text-white text-center py-3">IMAGE HERE</div>
                  <div class="card-body p-2">
                    <p class="mb-1 fw-bold text-truncate"><%= price.product.name %></p>
                    <p class="mb-1 fw-bold text-truncate"><%= price.product.description %></p>
                    <p class="mb-1 fw-bold text-truncate"><%= price.store.name %></p>
                    <p class="mb-1 text-danger">¥<%= price.price_with_tax %></p>
                    <button class="btn btn-sm btn-outline-primary w-100 py-0" style="font-size: 0.7rem;">Add to list</button>
                  </div>
                </div>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <div class="text-center my-4">
    <button class="btn btn-primary rounded-circle shadow" style="width: 50px; height: 50px;">+</button>
  </div>

  <div class="map-container border rounded-3 overflow-hidden" style="height: 300px;">
    <div id="map" style="width: 100%; height: 100%;" data-controller="map" data-map-markers-value="<%= @markers.to_json %>"></div>
  </div>
</div>
