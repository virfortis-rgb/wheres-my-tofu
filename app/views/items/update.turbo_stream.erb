<%# update grouped items %>
<%= turbo_stream.replace "grouped-items-container" do %>
  <div class="list-grouped-card mb-4" id="grouped-items-container">
    <%= render "items/grouped_items", items: @list.items, list: @list %>
  </div>
<% end %>

<%# update total  %>
<%= turbo_stream.replace "list_total" do %>
  <% list_total = @list.items.select(&:price).sum { |i| i.price.price_with_tax * i.quantity } %>
  <span id="list_total" class="total-price">Â¥<%= list_total %></span>
<% end %>

<%# 3. update map %>
<%= turbo_stream.replace "map-container" do %>
  <%= render partial: "lists/map", locals: { list: @list } %>
<% end %>
